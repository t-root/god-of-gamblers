<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Ma Thu·∫≠t - Lobby</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/lobby.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üé¥ B√ÄI MA THU·∫¨T üé¥</h1>
            <p class="subtitle">Ch·ªçn ch·∫ø ƒë·ªô ch∆°i v√† t·∫°o ph√≤ng</p>
        </header>

        <div class="lobby-content">
            <!-- Create Room Section -->
            <div class="section">
                <h2>üè† T·∫°o Ph√≤ng M·ªõi</h2>
                <div class="create-room-form">

                    <div class="form-group">
                        <label>Ch·∫ø ƒë·ªô b√†i:</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="mode" value="3" checked>
                                <span class="radio-custom"></span>
                                3 L√° B√†i
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="mode" value="6">
                                <span class="radio-custom"></span>
                                6 L√° B√†i
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="maxBoosts">S·ªë l·∫ßn Boost t·ªëi ƒëa:</label>
                        <select id="maxBoosts">
                            <option value="1">1 l·∫ßn</option>
                            <option value="2">2 l·∫ßn</option>
                            <option value="3" selected>3 l·∫ßn</option>
                            <option value="5">5 l·∫ßn</option>
                            <option value="10">10 l·∫ßn</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>S·ªë b·ªô b√†i:</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="decks" value="1" checked>
                                <span class="radio-custom"></span>
                                1 B·ªô B√†i (52 l√°)
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="decks" value="2">
                                <span class="radio-custom"></span>
                                2 B·ªô B√†i (104 l√°)
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="decks" value="3">
                                <span class="radio-custom"></span>
                                3 B·ªô B√†i (156 l√°)
                            </label>
                        </div>
                    </div>


                    <button class="btn btn-primary" id="createRoomBtn">
                        <span>‚ú®</span> T·∫°o Ph√≤ng
                    </button>
                </div>
            </div>

            <!-- Join Room Section -->
            <div class="section">
                <h2>üö™ Tham Gia Ph√≤ng</h2>
                <div class="join-room-form">
                    <div class="form-group">
                        <label for="roomId">ID Ph√≤ng:</label>
                        <input type="text" id="roomId" placeholder="Nh·∫≠p ID ph√≤ng (VD: ABC123)" maxlength="6">
                    </div>

                    <button class="btn btn-secondary" id="joinRoomBtn">
                        <span>üéØ</span> Tham Gia
                    </button>
                </div>
            </div>
        </div>

        <!-- Room Info Section (shown after creating room) -->
        <div class="room-created-section" id="roomCreatedSection" style="display: none;">
            <h2>üè† Ph√≤ng ƒê√£ T·∫°o</h2>
            <div class="room-info">
                <p><strong>ID Ph√≤ng:</strong> <span id="roomIdDisplay"></span></p>
                <p><strong>Ch·∫ø ƒë·ªô:</strong> <span id="roomModeDisplay"></span></p>
                <p><strong>Boost t·ªëi ƒëa:</strong> <span id="roomBoostDisplay"></span></p>
            </div>
            <div class="room-actions">
                <button class="btn btn-success" id="enterRoomBtn">
                    <span>üö™</span> ƒêi V√†o Ph√≤ng
                </button>
                <button class="btn btn-info" id="copyRoomIdBtn">
                    <span>üìã</span> Sao Ch√©p ID
                </button>
                <button class="btn btn-primary" id="copyRoomUrlBtn">
                    <span>üîó</span> Sao Ch√©p URL
                </button>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>üéÆ H∆∞·ªõng d·∫´n ch∆°i:</h3>
            <div class="instruction-item">
                <i>1.</i> M·ªói ng∆∞·ªùi ch∆°i ƒë·ªôc l·∫≠p v·ªõi giao di·ªán ri√™ng
            </div>
            <div class="instruction-item">
                <i>2.</i> Ch·ªçn 1 l√° b√†i ƒë·ªÉ ho√°n ƒë·ªïi
            </div>
            <div class="instruction-item">
                <i>3.</i> Nh·∫•n "Ho√°n b√†i" ƒë·ªÉ ch·ªçn l√° b√†i mong mu·ªën
            </div>
            <div class="instruction-item">
                <i>4.</i> N√≥i "nam m√¥ a di ƒë√† ph·∫≠t" ƒë·ªÉ tƒÉng t·ªâ l·ªá (1%-30%, kh√¥ng gi·ªõi h·∫°n l∆∞·ª£t)
            </div>
            <div class="instruction-item">
                <i>5.</i> Ch√† m√†n h√¨nh ƒë·ªÉ t√≠ch nƒÉng l∆∞·ª£ng
            </div>
            <div class="instruction-item">
                <i>6.</i> L√° b√†i ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng s·∫Ω b·ªã kh√≥a cho t·∫•t c·∫£ ng∆∞·ªùi ch∆°i
            </div>
        </div>

        <!-- Detailed Card Swap Explanation -->
        <div class="instruction-section">
            <h3>üí° Chi Ti·∫øt Ho√°n B√†i</h3>

            <div class="instruction-item">
                <strong>üéØ C√°ch Ho√°n B√†i Ho·∫°t ƒê·ªông:</strong><br>
                - B·∫°n ch·ªçn l√° mu·ªën ho√°n + gi√° tr·ªã mong mu·ªën (A,2,3,...,K)<br>
                - H·ªá th·ªëng t·∫°o "pool" l√° b√†i + l√° tr·∫Øng n·∫øu thi·∫øu:<br>
                  ‚Ä¢ 1%: T·ªëi thi·ªÉu 10 l√° ‚Üí thi·∫øu th√¨ th√™m ‚ö™ l√° tr·∫Øng<br>
                  ‚Ä¢ 10%: T·ªëi thi·ªÉu 10 l√° ‚Üí thi·∫øu th√¨ th√™m ‚ö™ l√° tr·∫Øng<br>
                  ‚Ä¢ 20%: T·ªëi thi·ªÉu 5 l√° ‚Üí thi·∫øu th√¨ th√™m ‚ö™ l√° tr·∫Øng<br>
                  ‚Ä¢ 30%: T·ªëi thi·ªÉu 3 l√° ‚Üí thi·∫øu th√¨ th√™m ‚ö™ l√° tr·∫Øng<br>
                - Random ch·ªçn 1 l√° t·ª´ pool ‚Üí l√° th·∫≠t: ho√°n ƒë·ªïi | ‚ö™ tr·∫Øng: gi·ªØ nguy√™n
            </div>

            <div class="instruction-item">
                <strong>üìä T·ªâ L·ªá Th√†nh C√¥ng (Logic Th·ª±c T·∫ø):</strong><br>

                <div class="rate-section">
                    <div class="rate-row">
                        <span class="rate-badge">0 l·∫ßn</span>
                        <span class="rate-arrow">‚Üí</span>
                        <span class="rate-value">1%</span>
                        <span class="rate-detail">Pool 10 l√°</span>
                    </div>

                    <div class="rate-row">
                        <span class="rate-badge">1+ l·∫ßn</span>
                        <span class="rate-arrow">‚Üí</span>
                        <span class="rate-value">10%</span>
                        <span class="rate-detail">Desired + 9 random</span>
                    </div>

                    <div class="rate-row">
                        <span class="rate-badge">2+ l·∫ßn</span>
                        <span class="rate-arrow">‚Üí</span>
                        <span class="rate-value">20%</span>
                        <span class="rate-detail">Desired + 4 random</span>
                    </div>

                    <div class="rate-row">
                        <span class="rate-badge">3+ l·∫ßn</span>
                        <span class="rate-arrow">‚Üí</span>
                        <span class="rate-value">30%</span>
                        <span class="rate-detail">Desired + 2 random</span>
                    </div>
                </div>

                <div class="rate-footer">
                    <div class="footer-note">
                        <span class="note-icon">‚ö™</span>
                        <span class="note-text"><strong>Tr·∫Øng:</strong> Kh√¥ng ho√°n ƒë·ªïi, gi·ªØ nguy√™n l√° c≈©</span>
                    </div>
                    <div class="footer-note">
                        <span class="note-icon">üîÑ</span>
                        <span class="note-text"><strong>Reset:</strong> V·ªÅ 1% sau m·ªói ho√°n th√†nh c√¥ng</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Messages -->
        <div class="toast" id="toast"></div>
    </div>

    <!-- Socket.IO -->
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/lobby.js') }}"></script>
</body>
</html>
